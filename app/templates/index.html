<!DOCTYPE html>
<html>
<head>
  <title>Modbus Stress Test</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      margin: 3rem auto;
      max-width: 800px;
    }
    input, select, button {
      padding: 0.5rem;
      margin: 0.5rem;
    }
    .log-box {
      background: #f4f4f4;
      padding: 1rem;
      margin-top: 1rem;
      height: 200px;
      overflow-y: scroll;
      text-align: left;
      border: 1px solid #ccc;
    }
  </style>
</head>
<body>
  <h1>Modbus TCP Stress Tester</h1>
  <form method="post" action="/start">
    <input type="number" name="clients" placeholder="Clients" required>
    <input type="text" name="ip" placeholder="Target IP" required>
    <input type="number" name="port" placeholder="Port" required value="502">
    <input type="number" step="0.1" name="interval" placeholder="Interval (s)" required value="1.0">
    <select name="operation">
      <option value="read">Read</option>
      <option value="write">Write</option>
    </select>
    <button type="submit">Start</button>
  </form>
  <form method="get" action="/stop">
    <button type="submit">Stop Clients</button>
  </form>
  <h2>Clients</h2>
  <ul>
    {% for c in clients %}
      <li>[{{c.id}}] {{c.status}} - {{c.value}}</li>
    {% endfor %}
  </ul>
  <div class="log-box">
    {% for line in logs %}
      <div>{{line}}</div>
    {% endfor %}
  </div>
</body>
</html>
